{"remainingRequest":"E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\桌面\\csgo项目\\poetize-vue2\\src\\components\\common\\printer.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\桌面\\csgo项目\\poetize-vue2\\src\\components\\common\\printer.vue","mtime":1681451078616},{"path":"E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgLy/lhoXlrrkKICAgIHByaW50ZXJJbmZvOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIKICAgIH0sCiAgICAvL+mAn+W6pgogICAgZHVyYXRpb246IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAxMDAKICAgIH0sCiAgICAvL+W7tui/nwogICAgZGVsYXk6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAzMDAwCiAgICB9LAogICAgd29ya2luZzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgb25jZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbnRlbnQ6ICIiLAogICAgICBjdXJzb3I6IDAsCiAgICAgIHRpbWVyOiBudWxsLAogICAgICB0aW1lb3V0OiBudWxsLAogICAgICBwcmludDogdHJ1ZQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICBpZiAodGhpcy53b3JraW5nKSB7CiAgICAgIC8vdGhpcy53b3Jr77ya5byV55So5Ye95pWwCiAgICAgIC8vdGhpcy53b3JrKCnvvJrmiafooYzlh73mlbAKICAgICAgdGhpcy5zdGFydCh0aGlzLndvcmspOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5jb250ZW50ID0gdGhpcy5wcmludGVySW5mbwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHdvcmtpbmcobmV3VmFsKSB7CiAgICAgIHRoaXMudG9CZWdpbigpOwogICAgfSwKICAgIHByaW50ZXJJbmZvKG5ld1ZhbCkgewogICAgICB0aGlzLnRvQmVnaW4oKTsKICAgIH0sCiAgICBjdXJzb3IoY3Vyc29yKSB7CiAgICAgIC8vc2xpY2Uoc3RhcnQsZW5kKe+8muS4jeWMheWQq2VuZAogICAgICB0aGlzLmNvbnRlbnQgPSB0aGlzLnByaW50ZXJJbmZvLnNsaWNlKDAsIGN1cnNvcikKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOwogIH0sCiAgbWV0aG9kczogewogICAgLyoqCiAgICAgKiDlrprml7YKICAgICAqLwogICAgc3RhcnQod29yaykgewogICAgICAvL+W7tui/nwogICAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAvL+mAn+W6pgogICAgICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICB3b3JrKCk7CiAgICAgICAgICBpZiAodGhpcy5jdXJzb3IgPT09IDAgfHwgKHRoaXMuY3Vyc29yID09PSB0aGlzLnByaW50ZXJJbmZvLmxlbmd0aCAmJiAhdGhpcy5vbmNlKSkgewogICAgICAgICAgICAvL+atpOWkhOS4uuS6huW7tui/nwogICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOwogICAgICAgICAgICB0aGlzLnN0YXJ0KHRoaXMud29yayk7CiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY3Vyc29yID09PSB0aGlzLnByaW50ZXJJbmZvLmxlbmd0aCAmJiB0aGlzLm9uY2UpIHsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgICAgICAgIH0KICAgICAgICB9LCB0aGlzLmR1cmF0aW9uKTsKICAgICAgfSwgdGhpcy5kZWxheSkKICAgIH0sCiAgICAvKioKICAgICAqIOmAu+i+kQogICAgICovCiAgICB3b3JrKCkgewogICAgICBsZXQgY3Vyc29yID0gdGhpcy5jdXJzb3I7CiAgICAgIGN1cnNvciArPSB0aGlzLnByaW50ID8gMSA6IC0xOwogICAgICBpZiAodGhpcy5wcmludCkgewogICAgICAgIGlmIChjdXJzb3IgPT09IHRoaXMucHJpbnRlckluZm8ubGVuZ3RoICsgMSkgewogICAgICAgICAgY3Vyc29yIC09IDI7CiAgICAgICAgICB0aGlzLnByaW50ID0gIXRoaXMucHJpbnQ7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChjdXJzb3IgPT09IC0xKSB7CiAgICAgICAgICBjdXJzb3IgKz0gMjsKICAgICAgICAgIHRoaXMucHJpbnQgPSAhdGhpcy5wcmludDsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5jdXJzb3IgPSBjdXJzb3I7CiAgICB9LAogICAgdG9CZWdpbigpIHsKICAgICAgdGhpcy5jdXJzb3IgPSAwOwogICAgICBpZiAodGhpcy50aW1lb3V0ICE9PSBudWxsKSB7CiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7CiAgICAgICAgaWYgKHRoaXMudGltZXIgIT09IG51bGwpIHsKICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLndvcmtpbmcpIHsKICAgICAgICB0aGlzLnN0YXJ0KHRoaXMud29yayk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jb250ZW50ID0gdGhpcy5wcmludGVySW5mbzsKICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["printer.vue"],"names":[],"mappings":";;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"printer.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\r\n  <div>\r\n    <slot name=\"paper\" :content=\"content\"></slot>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    props: {\r\n      //内容\r\n      printerInfo: {\r\n        type: String,\r\n        default: \"\"\r\n      },\r\n      //速度\r\n      duration: {\r\n        type: Number,\r\n        default: 100\r\n      },\r\n      //延迟\r\n      delay: {\r\n        type: Number,\r\n        default: 3000\r\n      },\r\n      working: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      once: {\r\n        type: Boolean,\r\n        default: false\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        content: \"\",\r\n        cursor: 0,\r\n        timer: null,\r\n        timeout: null,\r\n        print: true\r\n      };\r\n    },\r\n    created() {\r\n      if (this.working) {\r\n        //this.work：引用函数\r\n        //this.work()：执行函数\r\n        this.start(this.work);\r\n      } else {\r\n        this.content = this.printerInfo\r\n      }\r\n    },\r\n    watch: {\r\n      working(newVal) {\r\n        this.toBegin();\r\n      },\r\n      printerInfo(newVal) {\r\n        this.toBegin();\r\n      },\r\n      cursor(cursor) {\r\n        //slice(start,end)：不包含end\r\n        this.content = this.printerInfo.slice(0, cursor)\r\n      }\r\n    },\r\n    beforeDestroy() {\r\n      clearInterval(this.timer);\r\n    },\r\n    methods: {\r\n      /**\r\n       * 定时\r\n       */\r\n      start(work) {\r\n        //延迟\r\n        this.timeout = setTimeout(() => {\r\n          //速度\r\n          this.timer = setInterval(() => {\r\n            work();\r\n            if (this.cursor === 0 || (this.cursor === this.printerInfo.length && !this.once)) {\r\n              //此处为了延迟\r\n              clearInterval(this.timer);\r\n              this.start(this.work);\r\n            } else if (this.cursor === this.printerInfo.length && this.once) {\r\n              clearInterval(this.timer);\r\n            }\r\n          }, this.duration);\r\n        }, this.delay)\r\n      },\r\n      /**\r\n       * 逻辑\r\n       */\r\n      work() {\r\n        let cursor = this.cursor;\r\n        cursor += this.print ? 1 : -1;\r\n        if (this.print) {\r\n          if (cursor === this.printerInfo.length + 1) {\r\n            cursor -= 2;\r\n            this.print = !this.print;\r\n          }\r\n        } else {\r\n          if (cursor === -1) {\r\n            cursor += 2;\r\n            this.print = !this.print;\r\n          }\r\n        }\r\n        this.cursor = cursor;\r\n      },\r\n      toBegin() {\r\n        this.cursor = 0;\r\n        if (this.timeout !== null) {\r\n          clearTimeout(this.timeout);\r\n          if (this.timer !== null) {\r\n            clearInterval(this.timer);\r\n          }\r\n        }\r\n        if (this.working) {\r\n          this.start(this.work);\r\n        } else {\r\n          this.content = this.printerInfo;\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n"]}]}