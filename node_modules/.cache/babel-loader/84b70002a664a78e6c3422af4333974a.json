{"remainingRequest":"E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\babel-loader\\lib\\index.js!E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\桌面\\csgo项目\\poetize-vue2\\src\\components\\common\\printer.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\桌面\\csgo项目\\poetize-vue2\\src\\components\\common\\printer.vue","mtime":1681451078616},{"path":"E:\\桌面\\csgo项目\\poetize-vue2\\babel.config.js","mtime":1681451078527},{"path":"E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIC8v5YaF5a65CiAgICBwcmludGVySW5mbzogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9LAogICAgLy/pgJ/luqYKICAgIGR1cmF0aW9uOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMTAwCiAgICB9LAogICAgLy/lu7bov58KICAgIGRlbGF5OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMzAwMAogICAgfSwKICAgIHdvcmtpbmc6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIG9uY2U6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb250ZW50OiAiIiwKICAgICAgY3Vyc29yOiAwLAogICAgICB0aW1lcjogbnVsbCwKICAgICAgdGltZW91dDogbnVsbCwKICAgICAgcHJpbnQ6IHRydWUKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMud29ya2luZykgewogICAgICAvL3RoaXMud29ya++8muW8leeUqOWHveaVsAogICAgICAvL3RoaXMud29yaygp77ya5omn6KGM5Ye95pWwCiAgICAgIHRoaXMuc3RhcnQodGhpcy53b3JrKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY29udGVudCA9IHRoaXMucHJpbnRlckluZm87CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgd29ya2luZzogZnVuY3Rpb24gd29ya2luZyhuZXdWYWwpIHsKICAgICAgdGhpcy50b0JlZ2luKCk7CiAgICB9LAogICAgcHJpbnRlckluZm86IGZ1bmN0aW9uIHByaW50ZXJJbmZvKG5ld1ZhbCkgewogICAgICB0aGlzLnRvQmVnaW4oKTsKICAgIH0sCiAgICBjdXJzb3I6IGZ1bmN0aW9uIGN1cnNvcihfY3Vyc29yKSB7CiAgICAgIC8vc2xpY2Uoc3RhcnQsZW5kKe+8muS4jeWMheWQq2VuZAogICAgICB0aGlzLmNvbnRlbnQgPSB0aGlzLnByaW50ZXJJbmZvLnNsaWNlKDAsIF9jdXJzb3IpOwogICAgfQogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKioKICAgICAqIOWumuaXtgogICAgICovCiAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQod29yaykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy/lu7bov58KICAgICAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgLy/pgJ/luqYKICAgICAgICBfdGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHdvcmsoKTsKCiAgICAgICAgICBpZiAoX3RoaXMuY3Vyc29yID09PSAwIHx8IF90aGlzLmN1cnNvciA9PT0gX3RoaXMucHJpbnRlckluZm8ubGVuZ3RoICYmICFfdGhpcy5vbmNlKSB7CiAgICAgICAgICAgIC8v5q2k5aSE5Li65LqG5bu26L+fCiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoX3RoaXMudGltZXIpOwoKICAgICAgICAgICAgX3RoaXMuc3RhcnQoX3RoaXMud29yayk7CiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLmN1cnNvciA9PT0gX3RoaXMucHJpbnRlckluZm8ubGVuZ3RoICYmIF90aGlzLm9uY2UpIHsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChfdGhpcy50aW1lcik7CiAgICAgICAgICB9CiAgICAgICAgfSwgX3RoaXMuZHVyYXRpb24pOwogICAgICB9LCB0aGlzLmRlbGF5KTsKICAgIH0sCgogICAgLyoqCiAgICAgKiDpgLvovpEKICAgICAqLwogICAgd29yazogZnVuY3Rpb24gd29yaygpIHsKICAgICAgdmFyIGN1cnNvciA9IHRoaXMuY3Vyc29yOwogICAgICBjdXJzb3IgKz0gdGhpcy5wcmludCA/IDEgOiAtMTsKCiAgICAgIGlmICh0aGlzLnByaW50KSB7CiAgICAgICAgaWYgKGN1cnNvciA9PT0gdGhpcy5wcmludGVySW5mby5sZW5ndGggKyAxKSB7CiAgICAgICAgICBjdXJzb3IgLT0gMjsKICAgICAgICAgIHRoaXMucHJpbnQgPSAhdGhpcy5wcmludDsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGN1cnNvciA9PT0gLTEpIHsKICAgICAgICAgIGN1cnNvciArPSAyOwogICAgICAgICAgdGhpcy5wcmludCA9ICF0aGlzLnByaW50OwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5jdXJzb3IgPSBjdXJzb3I7CiAgICB9LAogICAgdG9CZWdpbjogZnVuY3Rpb24gdG9CZWdpbigpIHsKICAgICAgdGhpcy5jdXJzb3IgPSAwOwoKICAgICAgaWYgKHRoaXMudGltZW91dCAhPT0gbnVsbCkgewogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpOwoKICAgICAgICBpZiAodGhpcy50aW1lciAhPT0gbnVsbCkgewogICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLndvcmtpbmcpIHsKICAgICAgICB0aGlzLnN0YXJ0KHRoaXMud29yayk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jb250ZW50ID0gdGhpcy5wcmludGVySW5mbzsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;AAMA;EACAA;IACA;IACAC;MACAC,YADA;MAEAC;IAFA,CAFA;IAMA;IACAC;MACAF,YADA;MAEAC;IAFA,CAPA;IAWA;IACAE;MACAH,YADA;MAEAC;IAFA,CAZA;IAgBAG;MACAJ,aADA;MAEAC;IAFA,CAhBA;IAoBAI;MACAL,aADA;MAEAC;IAFA;EApBA,CADA;EA0BAK,IA1BA,kBA0BA;IACA;MACAC,WADA;MAEAC,SAFA;MAGAC,WAHA;MAIAC,aAJA;MAKAC;IALA;EAOA,CAlCA;EAmCAC,OAnCA,qBAmCA;IACA;MACA;MACA;MACA;IACA,CAJA,MAIA;MACA;IACA;EACA,CA3CA;EA4CAC;IACAT,OADA,mBACAU,MADA,EACA;MACA;IACA,CAHA;IAIAf,WAJA,uBAIAe,MAJA,EAIA;MACA;IACA,CANA;IAOAN,MAPA,kBAOAA,OAPA,EAOA;MACA;MACA;IACA;EAVA,CA5CA;EAwDAO,aAxDA,2BAwDA;IACAC;EACA,CA1DA;EA2DAC;IACA;AACA;AACA;IACAC,KAJA,iBAIAC,IAJA,EAIA;MAAA;;MACA;MACA;QACA;QACA;UACAA;;UACA;YACA;YACAH;;YACA;UACA,CAJA,MAIA;YACAA;UACA;QACA,CATA,EASA,cATA;MAUA,CAZA,EAYA,UAZA;IAaA,CAnBA;;IAoBA;AACA;AACA;IACAG,IAvBA,kBAuBA;MACA;MACAX;;MACA;QACA;UACAA;UACA;QACA;MACA,CALA,MAKA;QACA;UACAA;UACA;QACA;MACA;;MACA;IACA,CAtCA;IAuCAY,OAvCA,qBAuCA;MACA;;MACA;QACAC;;QACA;UACAL;QACA;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA;EApDA;AA3DA","names":["props","printerInfo","type","default","duration","delay","working","once","data","content","cursor","timer","timeout","print","created","watch","newVal","beforeDestroy","clearInterval","methods","start","work","toBegin","clearTimeout"],"sourceRoot":"src/components/common","sources":["printer.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <slot name=\"paper\" :content=\"content\"></slot>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    props: {\r\n      //内容\r\n      printerInfo: {\r\n        type: String,\r\n        default: \"\"\r\n      },\r\n      //速度\r\n      duration: {\r\n        type: Number,\r\n        default: 100\r\n      },\r\n      //延迟\r\n      delay: {\r\n        type: Number,\r\n        default: 3000\r\n      },\r\n      working: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      once: {\r\n        type: Boolean,\r\n        default: false\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        content: \"\",\r\n        cursor: 0,\r\n        timer: null,\r\n        timeout: null,\r\n        print: true\r\n      };\r\n    },\r\n    created() {\r\n      if (this.working) {\r\n        //this.work：引用函数\r\n        //this.work()：执行函数\r\n        this.start(this.work);\r\n      } else {\r\n        this.content = this.printerInfo\r\n      }\r\n    },\r\n    watch: {\r\n      working(newVal) {\r\n        this.toBegin();\r\n      },\r\n      printerInfo(newVal) {\r\n        this.toBegin();\r\n      },\r\n      cursor(cursor) {\r\n        //slice(start,end)：不包含end\r\n        this.content = this.printerInfo.slice(0, cursor)\r\n      }\r\n    },\r\n    beforeDestroy() {\r\n      clearInterval(this.timer);\r\n    },\r\n    methods: {\r\n      /**\r\n       * 定时\r\n       */\r\n      start(work) {\r\n        //延迟\r\n        this.timeout = setTimeout(() => {\r\n          //速度\r\n          this.timer = setInterval(() => {\r\n            work();\r\n            if (this.cursor === 0 || (this.cursor === this.printerInfo.length && !this.once)) {\r\n              //此处为了延迟\r\n              clearInterval(this.timer);\r\n              this.start(this.work);\r\n            } else if (this.cursor === this.printerInfo.length && this.once) {\r\n              clearInterval(this.timer);\r\n            }\r\n          }, this.duration);\r\n        }, this.delay)\r\n      },\r\n      /**\r\n       * 逻辑\r\n       */\r\n      work() {\r\n        let cursor = this.cursor;\r\n        cursor += this.print ? 1 : -1;\r\n        if (this.print) {\r\n          if (cursor === this.printerInfo.length + 1) {\r\n            cursor -= 2;\r\n            this.print = !this.print;\r\n          }\r\n        } else {\r\n          if (cursor === -1) {\r\n            cursor += 2;\r\n            this.print = !this.print;\r\n          }\r\n        }\r\n        this.cursor = cursor;\r\n      },\r\n      toBegin() {\r\n        this.cursor = 0;\r\n        if (this.timeout !== null) {\r\n          clearTimeout(this.timeout);\r\n          if (this.timer !== null) {\r\n            clearInterval(this.timer);\r\n          }\r\n        }\r\n        if (this.working) {\r\n          this.start(this.work);\r\n        } else {\r\n          this.content = this.printerInfo;\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n"]}]}