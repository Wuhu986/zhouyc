{"remainingRequest":"E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\babel-loader\\lib\\index.js!E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\桌面\\csgo项目\\poetize-vue2\\src\\components\\comment\\commentBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\桌面\\csgo项目\\poetize-vue2\\src\\components\\comment\\commentBox.vue","mtime":1681451078614},{"path":"E:\\桌面\\csgo项目\\poetize-vue2\\babel.config.js","mtime":1681451078527},{"path":"E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\桌面\\csgo项目\\poetize-vue2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KdmFyIGVtb2ppID0gZnVuY3Rpb24gZW1vamkoKSB7CiAgcmV0dXJuIGltcG9ydCgiLi4vY29tbW9uL2Vtb2ppIik7Cn07Cgp2YXIgcHJvQnV0dG9uID0gZnVuY3Rpb24gcHJvQnV0dG9uKCkgewogIHJldHVybiBpbXBvcnQoIi4uL2NvbW1vbi9wcm9CdXR0b24iKTsKfTsKCnZhciB1cGxvYWRQaWN0dXJlID0gZnVuY3Rpb24gdXBsb2FkUGljdHVyZSgpIHsKICByZXR1cm4gaW1wb3J0KCIuLi9jb21tb24vdXBsb2FkUGljdHVyZSIpOwp9OwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIGVtb2ppOiBlbW9qaSwKICAgIHByb0J1dHRvbjogcHJvQnV0dG9uLAogICAgdXBsb2FkUGljdHVyZTogdXBsb2FkUGljdHVyZQogIH0sCiAgcHJvcHM6IHsKICAgIGRpc2FibGVHcmFmZml0aTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbW1lbnRDb250ZW50OiAiIiwKICAgICAgc2hvd0Vtb2ppOiBmYWxzZSwKICAgICAgc2hvd1BpY3R1cmU6IGZhbHNlLAogICAgICBwaWN0dXJlOiB7CiAgICAgICAgbmFtZTogdGhpcy4kc3RvcmUuc3RhdGUuY3VycmVudFVzZXIudXNlcm5hbWUsCiAgICAgICAgdXJsOiAiIgogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgb3BlblBpY3R1cmU6IGZ1bmN0aW9uIG9wZW5QaWN0dXJlKCkgewogICAgICBpZiAodGhpcy4kY29tbW9uLmlzRW1wdHkodGhpcy4kc3RvcmUuc3RhdGUuY3VycmVudFVzZXIpKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAi6K+35YWI55m75b2V77yBIiwKICAgICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuc2hvd1BpY3R1cmUgPSB0cnVlOwogICAgfSwKICAgIGFkZFBpY3R1cmU6IGZ1bmN0aW9uIGFkZFBpY3R1cmUocmVzKSB7CiAgICAgIHRoaXMucGljdHVyZS51cmwgPSByZXM7CiAgICAgIHRoaXMuc2F2ZVBpY3R1cmUoKTsKICAgIH0sCiAgICBzYXZlUGljdHVyZTogZnVuY3Rpb24gc2F2ZVBpY3R1cmUoKSB7CiAgICAgIHZhciBpbWcgPSAiPCIgKyB0aGlzLnBpY3R1cmUubmFtZSArICIsIiArIHRoaXMucGljdHVyZS51cmwgKyAiPiI7CiAgICAgIHRoaXMuY29tbWVudENvbnRlbnQgKz0gaW1nOwogICAgICB0aGlzLnBpY3R1cmUudXJsID0gIiI7CiAgICAgIHRoaXMuc2hvd1BpY3R1cmUgPSBmYWxzZTsKICAgIH0sCiAgICBhZGRFbW9qaTogZnVuY3Rpb24gYWRkRW1vamkoa2V5KSB7CiAgICAgIHRoaXMuY29tbWVudENvbnRlbnQgKz0ga2V5OwogICAgfSwKICAgIHNob3dHcmFmZml0aTogZnVuY3Rpb24gc2hvd0dyYWZmaXRpKCkgewogICAgICBpZiAodGhpcy4kY29tbW9uLmlzRW1wdHkodGhpcy4kc3RvcmUuc3RhdGUuY3VycmVudFVzZXIpKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAi6K+35YWI55m75b2V77yBIiwKICAgICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuY29tbWVudENvbnRlbnQgPSAiIjsKICAgICAgdGhpcy4kZW1pdCgic2hvd0dyYWZmaXRpIik7CiAgICB9LAogICAgc3VibWl0Q29tbWVudDogZnVuY3Rpb24gc3VibWl0Q29tbWVudCgpIHsKICAgICAgaWYgKHRoaXMuJGNvbW1vbi5pc0VtcHR5KHRoaXMuJHN0b3JlLnN0YXRlLmN1cnJlbnRVc2VyKSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogIuivt+WFiOeZu+W9le+8gSIsCiAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5jb21tZW50Q29udGVudC50cmltKCkgPT09ICIiKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAi5L2g6L+Y5rKh5YaZ5ZGifiIsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoInN1Ym1pdENvbW1lbnQiLCB0aGlzLmNvbW1lbnRDb250ZW50LnRyaW0oKSk7CiAgICAgIHRoaXMuY29tbWVudENvbnRlbnQgPSAiIjsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;EAAA;AAAA;;AACA;EAAA;AAAA;;AACA;EAAA;AAAA;;AAEA;EACAA;IACAC,YADA;IAEAC,oBAFA;IAGAC;EAHA,CADA;EAMAC;IACAC;MACAC,aADA;MAEAC;IAFA;EADA,CANA;EAYAC,IAZA,kBAYA;IACA;MACAC,kBADA;MAEAC,gBAFA;MAGAC,kBAHA;MAIAC;QACAC,4CADA;QAEAC;MAFA;IAJA;EASA,CAtBA;EAuBAC;IACAC,WADA,yBACA;MACA;QACA;UACAC,gBADA;UAEAX;QAFA;QAIA;MACA;;MAEA;IACA,CAXA;IAaAY,UAbA,sBAaAC,GAbA,EAaA;MACA;MACA;IACA,CAhBA;IAiBAC,WAjBA,yBAiBA;MACA;MACA;MACA;MACA;IACA,CAtBA;IAuBAC,QAvBA,oBAuBAC,GAvBA,EAuBA;MACA;IACA,CAzBA;IA0BAC,YA1BA,0BA0BA;MACA;QACA;UACAN,gBADA;UAEAX;QAFA;QAIA;MACA;;MAEA;MACA;IACA,CArCA;IAsCAkB,aAtCA,2BAsCA;MACA;QACA;UACAP,gBADA;UAEAX;QAFA;QAIA;MACA;;MAEA;QACA;UACAW,iBADA;UAEAX;QAFA;QAIA;MACA;;MACA;MACA;IACA;EAxDA;AAvBA","names":["components","emoji","proButton","uploadPicture","props","disableGraffiti","type","default","data","commentContent","showEmoji","showPicture","picture","name","url","methods","openPicture","message","addPicture","res","savePicture","addEmoji","key","showGraffiti","submitComment"],"sourceRoot":"src/components/comment","sources":["commentBox.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <!-- 框 -->\r\n    <textarea\r\n      class=\"comment-textarea\"\r\n      v-model=\"commentContent\"\r\n      placeholder=\"写下点什么...\"\r\n      maxlength=\"1000\"/>\r\n    <!-- 按钮 -->\r\n    <div class=\"myBetween\" style=\"margin-bottom: 10px\">\r\n      <div style=\"display: flex\">\r\n        <div :class=\"{'emoji-active':showEmoji}\"\r\n             @click=\"showEmoji = !showEmoji\">\r\n          <i class=\"el-icon-orange myEmoji\"></i>\r\n        </div>\r\n        <div @click=\"openPicture()\">\r\n          <i class=\"el-icon-picture myPicture\"></i>\r\n        </div>\r\n      </div>\r\n\r\n      <div style=\"display: flex\">\r\n<!--        <proButton :info=\"'涂鸦'\"-->\r\n<!--                   v-show=\"!$common.mobile() && !disableGraffiti\"-->\r\n<!--                   @click.native=\"showGraffiti()\"-->\r\n<!--                   :before=\"$constant.before_color_1\"-->\r\n<!--                   :after=\"$constant.after_color_1\"-->\r\n<!--                   style=\"margin-right: 6px\">-->\r\n<!--        </proButton>-->\r\n        <proButton :info=\"'提交'\"\r\n                   @click.native=\"submitComment()\"\r\n                   :before=\"$constant.before_color_2\"\r\n                   :after=\"$constant.after_color_2\">\r\n        </proButton>\r\n      </div>\r\n    </div>\r\n    <!-- 表情 -->\r\n    <emoji @addEmoji=\"addEmoji\" :showEmoji=\"showEmoji\"></emoji>\r\n\r\n    <el-dialog title=\"图片\"\r\n               :visible.sync=\"showPicture\"\r\n               width=\"25%\"\r\n               :append-to-body=\"true\"\r\n               destroy-on-close\r\n               center>\r\n      <div>\r\n        <uploadPicture :prefix=\"'commentPicture'\" @addPicture=\"addPicture\" :maxSize=\"5\"\r\n                       :maxNumber=\"1\"></uploadPicture>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  const emoji = () => import( \"../common/emoji\");\r\n  const proButton = () => import( \"../common/proButton\");\r\n  const uploadPicture = () => import( \"../common/uploadPicture\");\r\n\r\n  export default {\r\n    components: {\r\n      emoji,\r\n      proButton,\r\n      uploadPicture\r\n    },\r\n    props: {\r\n      disableGraffiti: {\r\n        type: Boolean,\r\n        default: false\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        commentContent: \"\",\r\n        showEmoji: false,\r\n        showPicture: false,\r\n        picture: {\r\n          name: this.$store.state.currentUser.username,\r\n          url: \"\"\r\n        }\r\n      };\r\n    },\r\n    methods: {\r\n      openPicture() {\r\n        if (this.$common.isEmpty(this.$store.state.currentUser)) {\r\n          this.$message({\r\n            message: \"请先登录！\",\r\n            type: \"error\"\r\n          });\r\n          return;\r\n        }\r\n\r\n        this.showPicture = true;\r\n      },\r\n\r\n      addPicture(res) {\r\n        this.picture.url = res;\r\n        this.savePicture();\r\n      },\r\n      savePicture() {\r\n        let img = \"<\" + this.picture.name + \",\" + this.picture.url + \">\";\r\n        this.commentContent += img;\r\n        this.picture.url = \"\";\r\n        this.showPicture = false;\r\n      },\r\n      addEmoji(key) {\r\n        this.commentContent += key;\r\n      },\r\n      showGraffiti() {\r\n        if (this.$common.isEmpty(this.$store.state.currentUser)) {\r\n          this.$message({\r\n            message: \"请先登录！\",\r\n            type: \"error\"\r\n          });\r\n          return;\r\n        }\r\n\r\n        this.commentContent = \"\";\r\n        this.$emit(\"showGraffiti\");\r\n      },\r\n      submitComment() {\r\n        if (this.$common.isEmpty(this.$store.state.currentUser)) {\r\n          this.$message({\r\n            message: \"请先登录！\",\r\n            type: \"error\"\r\n          });\r\n          return;\r\n        }\r\n\r\n        if (this.commentContent.trim() === \"\") {\r\n          this.$message({\r\n            message: \"你还没写呢~\",\r\n            type: \"warning\"\r\n          });\r\n          return;\r\n        }\r\n        this.$emit(\"submitComment\", this.commentContent.trim());\r\n        this.commentContent = \"\";\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .comment-textarea {\r\n    border: 1px solid var(--lightGray);\r\n    width: 100%;\r\n    font-size: 14px;\r\n    padding: 15px;\r\n    min-height: 180px;\r\n    /* 不改变大小 */\r\n    resize: none;\r\n    /* 不改变边框 */\r\n    outline: none;\r\n    border-radius: 4px;\r\n    background-image: var(--commentURL);\r\n    background-size: contain;\r\n    background-repeat: no-repeat;\r\n    background-position: 100%;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  .comment-textarea:focus {\r\n    border-color: var(--themeBackground);\r\n  }\r\n\r\n  .myEmoji {\r\n    font-size: 18px;\r\n    cursor: pointer;\r\n    transition: all 0.5s;\r\n    margin-right: 12px;\r\n  }\r\n\r\n  .myEmoji:hover {\r\n    transform: rotate(360deg);\r\n    font-size: 22px;\r\n  }\r\n\r\n  .myPicture {\r\n    font-size: 18px;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .emoji-active {\r\n    color: var(--red);\r\n  }\r\n</style>\r\n"]}]}